<div (mouseover)="showGadgetControls(true)"
     (mouseleave)="showGadgetControls(false)" class="ui center aligned segment gadget" dnd-draggable
     [dragEnabled]="true" [dragData]="instanceId" [dropZones]="['c0','c1','c2','c3','r0','r1']"
     style="background-color: #f7f7f7">

    <app-gadget-header
            [title]="title"
            [inRun]="inRun"
            [inConfig]="inConfig"
            [actionInitiated]="actionInitiated"
            [showOperationControls]="showOperationControls"
            [gadgetHasOperationControls]="gadgetHasOperationControls"
            [showConfigurationControl]="showConfigurationControl"
            [showControls]="showControls"
            (toggleConfigModeEvent)="toggleConfigMode()"
            (removeEvent)="remove()"
            (runEvent)="run()"
            (stopEvent)="stop()">
    </app-gadget-header>

    <div *ngIf="!inConfig" class="storage">
        <app-data-list

                [objectTitleList]="objectTitleList"
                [objectList]="objectList"
                [placeHolderText]="placeHolderText"
                [layoutColumnOneWidth]="layoutColumnOneWidth"
                [layoutColumnTwoWidth]="layoutColumnTwoWidth">

            <ng-template let-item="$implicit">

                <div [@showHideAnimation] class="ui segment" style="background-color:white;">
                    <div class="ui large middle aligned divided list">
                        <div class="item">
                            <div class="right floated content">
                                <!-- todo : if there are more than one action display a button with
                                vertical ellipse and implement onHover to show all action buttons
                                -->
                                <a *ngIf="item.actions.length == 1"
                                   mat-raised-button
                                   routerLink="."
                                   (click)="actionHandler(item, item.actions[0].name)" color="primary">
                                    {{item.actions[0].name}}
                                </a>
                            </div>
                            <div class="ui stackable grid">
                                <div class="two wide column">
                                    <img class="ui image" src="{{item.icon}}">
                                </div>
                                <div class="two wide column">

                                </div>

                                <div class="four wide column">
                                    <div class="ui green indicating progress" data-value="25" data-total="200">
                                        <div class="bar">
                                            <div class="progress"></div>
                                        </div>
                                        <div class="label"> <span style="color:grey">Used Storage</span></div>
                                    </div>
                                </div>

                                <div class="two wide column">
                                    <div class="ui grey mini statistic">

                                        <div class="value">
                                            <i class="grey server icon"></i>&nbsp;&nbsp;{{item.vmCount}}
                                        </div>
                                        <div class="grey label">
                                            <span style="color:grey"> VM Count </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="two wide column">
                                    <div class="ui grey mini statistic">

                                        <div class="value">
                                            <i class="grey file outline icon"></i>&nbsp;&nbsp;{{item.fileCount}}
                                        </div>
                                        <div class="label">
                                            <span style="color:grey"> File Count </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ui bottom attached">
                        <button *ngFor="let tag of item.tags" class="ui basic gray compact button">{{tag.name}}
                        </button>
                    </div>
                </div>

            </ng-template>

        </app-data-list>


    </div>

    <app-dynamic-form *ngIf="inConfig"
                      [propertyPages]="propertyPages"
                      [instanceId]="instanceId"
                      (updatePropertiesEvent)="updateProperties($event)">
    </app-dynamic-form>

    <app-error-handler
            [errorObject]="errorObject"
            [errorExists]="errorExists">
    </app-error-handler>

</div>

